<ion-accordion-group>
  <ion-accordion *ngFor="let book of books" [value]="book.Id.toString()" class="book-accordion" [class.expanded]="isExpanded[book.Id]">
    <ion-item slot="header" (click)="toggleAccordion(book.Id)" class="book-header">
      <ion-avatar slot="start">
        <ion-icon name="book"></ion-icon>
      </ion-avatar>
      <ion-label>
        <h2>{{ book.Title }}</h2>
        <p>{{ book.Author }}</p>
      </ion-label>
      <ion-badge slot="end" [color]="book.Available ? 'success' : 'medium'">
        {{ book.Available ? 'Disponible' : 'Prestado' }}
      </ion-badge>
    </ion-item>

    <div slot="content" class="book-content">
      <ion-list lines="none">
        <ion-item>
          <ion-label>
            <ion-text color="medium">ISBN</ion-text>
            <p>{{ book.Isbn }}</p>
          </ion-label>
        </ion-item>
        <ion-item>
          <ion-label>
            <ion-text color="medium">Fecha de registro</ion-text>
            <p>{{ book.CreatedAt | date:'dd/MM/yyyy' }}</p>
          </ion-label>
        </ion-item>
      </ion-list>

      <ion-button 
        expand="block" 
        color="primary" 
        class="loan-button"
        [disabled]="!book.Available"
        (click)="onLoanBook(book, $event)">
        <ion-icon name="hand-left" slot="start"></ion-icon>
        Prestar libro
      </ion-button>
    </div>
  </ion-accordion>
</ion-accordion-group> 